<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Oceanic Odyssey — Stand Up Paddling Oahu</title>

  <meta name="description" content="Join Drew Burrier on his stand-up paddle adventure around Oʻahu. Track the route, explore chapters, and feel the Pacific." />

  <!-- Fonts & vendor CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <link rel="stylesheet" href="styles.css" />
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZKS4VZRVKZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)}
  gtag('js', new Date()); gtag('config', 'G-ZKS4VZRVKZ');
</script>

<body>
  <!-- Ocean backdrop layers -->
  <div class="ocean-bg" aria-hidden="true"></div>
  <div class="ocean-noise" aria-hidden="true"></div>

  <!-- Header: Hamburger + Oʻahu trace brand + compact nav (no standalone Sponsor button) -->
  <header class="site-header">
    <button class="hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <a class="brand" href="index.html" aria-label="My Oceanic Odyssey">
      <!-- Inline Oʻahu trace logo; swap path `d` with your exact trace anytime -->
      <svg class="brand-icon" viewBox="0 0 64 64" aria-hidden="true">
        <path d="M14,40
                 C10,36 8,32 10,28
                 c2-4 6-7 10-9
                 c5-2 11-3 16-1
                 c4,2 7,5 9,9
                 c2,4 2,8 0,11
                 c-2,3 -6,5 -10,6
                 c-5,1 -10,1 -15-1
                 c-3-1 -5-2 -6-3 z"
              fill="none" vector-effect="non-scaling-stroke" />
      </svg>
      <span class="brand-text">My Oceanic Odyssey</span>
    </a>

    <nav class="main-nav">
      <a href="introduction.html">Introduction</a>
      <a href="science.html">Science</a>
      <a href="gallery.html">Gallery</a>
      <a href="support.html">Support</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <!-- Accessible Drawer (Sponsor inside) -->
  <aside id="drawer" class="drawer" role="dialog" aria-modal="true" aria-label="Site menu" hidden>
    <div class="drawer-header">
      <strong>Navigate</strong>
      <button class="drawer-close" id="drawerClose" aria-label="Close menu">&times;</button>
    </div>

    <div class="drawer-section">
      <a href="introduction.html">Introduction</a>
      <a href="about.html">About the Author</a>
      <a href="landing.html">Landing Page</a>
      <a href="science.html">Open Oceanography</a>
      <a href="gallery.html">Photo Map</a>
      <a href="freelance.html">Work With Me</a>
      <a class="sponsor-cta" href="support.html">Sponsor the Journey</a>
    </div>

    <div class="drawer-section">
      <h3>Planning Tools</h3>
      <a href="https://www.windy.com/21.305/-157.856?2024022418,21.311,-158.159,10,m:egUaLQ" target="_blank" rel="noopener">Windy.com</a>
      <a href="https://earth.google.com/web/@21.26186347,-157.81431259,47.74905754a,5624.30629881d,35y,360h,0t,0r" target="_blank" rel="noopener">Google Earth</a>
    </div>

    <div class="drawer-section">
      <h3>Follow</h3>
      <div class="drawer-social">
        <a aria-label="Instagram" href="https://www.instagram.com/drewski1003" target="_blank"><i class="fab fa-instagram"></i></a>
        <a aria-label="Medium" href="https://medium.com/my-oceanic-odyssey" target="_blank"><i class="fab fa-medium"></i></a>
        <a aria-label="Substack" href="https://substack.com/@drewburrier" target="_blank"><i class="fas fa-newspaper"></i></a>
        <a aria-label="LinkedIn" href="https://www.linkedin.com/in/drew-burrier-90092067/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
        <a aria-label="Spotify" href="https://open.spotify.com/user/12148616871" target="_blank"><i class="fab fa-spotify"></i></a>
      </div>
    </div>
  </aside>
  <div id="backdrop" class="backdrop" hidden></div>

  <!-- Main: your map untouched -->
  <main class="wrap">
    <section class="card">
      <div id="map"></div>
      <div id="mapGuide" class="map-guide">
        <p>Click markers to explore paddle routes and cycle through the journey.</p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="social">
      <a aria-label="Instagram" href="https://www.instagram.com/drewski1003" target="_blank"><i class="fab fa-instagram"></i></a>
      <a aria-label="Medium" href="https://medium.com/my-oceanic-odyssey" target="_blank"><i class="fab fa-medium"></i></a>
      <a aria-label="Substack" href="https://substack.com/@drewburrier" target="_blank"><i class="fas fa-newspaper"></i></a>
      <a aria-label="LinkedIn" href="https://www.linkedin.com/in/drew-burrier-90092067/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
      <a aria-label="Spotify" href="https://open.spotify.com/user/12148616871" target="_blank"><i class="fab fa-spotify"></i></a>
    </div>
    <div class="legal">© My Oceanic Odyssey</div>
  </footer>

  <!-- Vendor JS (keep your map logic intact) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
  <script src="Polyline.encoded.js"></script>

  <!-- Your existing map/data scripts -->
  <script src="coastline_oahu_linestring.js"></script>
  <script src="strava_api.js"></script>

  <!-- Drawer controls (a11y-safe) -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.getElementById('hamburger');
      const drawer    = document.getElementById('drawer');
      const closeBtn  = document.getElementById('drawerClose');
      const backdrop  = document.getElementById('backdrop');
      const main      = document.querySelector('main');
      const footer    = document.querySelector('footer');

      let lastFocused = null;

      function setInert(on) {
        if (on) {
          main?.setAttribute('inert','');
          footer?.setAttribute('inert','');
        } else {
          main?.removeAttribute('inert');
          footer?.removeAttribute('inert');
        }
      }

      function openDrawer() {
        lastFocused = document.activeElement;

        drawer.hidden = false;
        backdrop.hidden = false;
        drawer.classList.add('open');
        setInert(true);

        hamburger.setAttribute('aria-expanded','true');

        // move focus into dialog
        closeBtn.focus();

        // enable focus trap
        document.addEventListener('keydown', trapFocus);
      }

      function closeDrawer() {
        // return focus BEFORE hiding to avoid aria-hidden/focus conflict
        (lastFocused || hamburger).focus();

        drawer.classList.remove('open');
        drawer.hidden = true;
        backdrop.hidden = true;
        setInert(false);

        hamburger.setAttribute('aria-expanded','false');

        document.removeEventListener('keydown', trapFocus);
      }

      function trapFocus(e) {
        if (e.key !== 'Tab' || drawer.hidden) return;

        const focusables = drawer.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        if (!focusables.length) return;

        const first = focusables[0];
        const last  = focusables[focusables.length - 1];

        if (e.shiftKey && document.activeElement === first) {
          e.preventDefault(); last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
          e.preventDefault(); first.focus();
        }
      }

      hamburger.addEventListener('click', openDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      backdrop.addEventListener('click', closeDrawer);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });
    });
  </script>
</body>
</html>
