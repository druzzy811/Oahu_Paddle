<!-- gallery.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Photo Gallery — My Oceanic Odyssey</title>

  <meta name="description" content="Explore the photo gallery and map of My Oceanic Odyssey." />

  <!-- Shared fonts/vendor CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Leaflet (needed for the photo map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin />

  <!-- Shared site stylesheet -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Gallery-specific stylesheet you already have -->
  <link rel="stylesheet" href="gallery_style.css" />
</head>

<!-- GA -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZKS4VZRVKZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)}
  gtag('js', new Date()); gtag('config', 'G-ZKS4VZRVKZ');
</script>

<body>
  <!-- Shared ocean backdrop -->
  <div class="ocean-bg" aria-hidden="true"></div>
  <div class="ocean-noise" aria-hidden="true"></div>

  <!-- Shared header -->
  <header class="site-header">
    <button class="hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <a class="brand" href="index.html" aria-label="My Oceanic Odyssey">
      <svg class="brand-icon" viewBox="0 0 64 64" aria-hidden="true">
        <path d="M14,40 C10,36 8,32 10,28 c2-4 6-7 10-9 c5-2 11-3 16-1 c4,2 7,5 9,9 c2,4 2,8 0,11 c-2,3 -6,5 -10,6 c-5,1 -10,1 -15-1 c-3-1 -5-2 -6-3 z"
              fill="none" vector-effect="non-scaling-stroke" />
      </svg>
      <span class="brand-text">My Oceanic Odyssey</span>
    </a>

    <nav class="main-nav">
      <a href="introduction.html">Introduction</a>
      <a href="science.html">Science</a>
      <a href="gallery.html" aria-current="page">Gallery</a>
      <a href="support.html">Support</a>
      <a href="about.html">About</a>
    </nav>
  </header>

  <!-- Shared drawer (your updated link set) -->
  <aside id="drawer" class="drawer" role="dialog" aria-modal="true" aria-label="Site menu" hidden>
    <div class="drawer-header">
      <strong>Navigate</strong>
      <button class="drawer-close" id="drawerClose" aria-label="Close menu">&times;</button>
    </div>

    <div class="drawer-section">
      <a href="introduction.html">Introduction</a>
      <a href="about.html">About the Author</a>
      <a href="landing.html">Landing Page</a>
      <a href="science.html">Open Oceanography</a>
      <a href="gallery.html" aria-current="page">Photo Map</a>
      <a href="freelance.html">Work With Me</a>
      <a class="sponsor-cta" href="support.html">Sponsor the Journey</a>
    </div>
  </aside>
  <div id="backdrop" class="backdrop" hidden></div>

  <!-- Main -->
  <main class="wrap">
    <!-- Hero -->
    <section class="card intro-hero">
      <div class="intro-hero__content">
        <h1>Photo Gallery</h1>
        <p class="lead">A living map of the journey — click markers to open photos and moments along the way.</p>
      </div>
    </section>

    <!-- Map card (uses your existing gallery JS/CSS) -->
    <section class="card" style="overflow:hidden;">
      <div id="map"></div>
    </section>
  </main>

  <!-- Shared footer -->
  <footer class="site-footer">
    <div class="social">
      <a aria-label="Instagram" href="https://www.instagram.com/drewski1003" target="_blank"><i class="fab fa-instagram"></i></a>
      <a aria-label="Medium" href="https://medium.com/my-oceanic-odyssey" target="_blank"><i class="fab fa-medium"></i></a>
      <a aria-label="Substack" href="https://substack.com/@drewburrier" target="_blank"><i class="fas fa-newspaper"></i></a>
      <a aria-label="LinkedIn" href="https://www.linkedin.com/in/drew-burrier-90092067/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
      <a aria-label="Spotify" href="https://open.spotify.com/user/12148616871" target="_blank"><i class="fab fa-spotify"></i></a>
    </div>
    <div class="legal">© My Oceanic Odyssey</div>
  </footer>

  <!-- Vendor JS for map -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
  <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

  <!-- Your data & gallery scripts (kept as-is) -->
  <script src="Gallery/photos.js"></script>
  <script src="scripts.js"></script>

  <!-- Shared drawer controls -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.getElementById('hamburger');
      const drawer    = document.getElementById('drawer');
      const closeBtn  = document.getElementById('drawerClose');
      const backdrop  = document.getElementById('backdrop');
      const main      = document.querySelector('main');
      const footer    = document.querySelector('footer');

      let lastFocused = null;

      function setInert(on) {
        if (on) { main?.setAttribute('inert',''); footer?.setAttribute('inert',''); }
        else    { main?.removeAttribute('inert'); footer?.removeAttribute('inert'); }
      }

      function openDrawer() {
        lastFocused = document.activeElement;
        drawer.hidden = false;
        backdrop.hidden = false;
        drawer.classList.add('open');
        setInert(true);
        hamburger.setAttribute('aria-expanded','true');
        closeBtn.focus();
        document.addEventListener('keydown', trapFocus);
      }

      function closeDrawer() {
        (lastFocused || hamburger).focus();
        drawer.classList.remove('open');
        drawer.hidden = true;
        backdrop.hidden = true;
        setInert(false);
        hamburger.setAttribute('aria-expanded','false');
        document.removeEventListener('keydown', trapFocus);
      }

      function trapFocus(e) {
        if (e.key !== 'Tab' || drawer.hidden) return;
        const focusables = drawer.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'
        );
        if (!focusables.length) return;
        const first = focusables[0];
        const last  = focusables[focusables.length - 1];
        if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
        else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
      }

      hamburger.addEventListener('click', openDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      backdrop.addEventListener('click', closeDrawer);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });
    });
  </script>
</body>
</html>
